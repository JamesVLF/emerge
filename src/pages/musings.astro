---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const musingsPosts = (await getCollection('musings')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title="Musings | James">
  <div class="max-w-4xl mx-auto">
    <div class="mb-16">
      <h1 class="text-5xl md:text-6xl font-display font-semibold mb-6">
        <span class="bg-gradient-to-r from-neural-900 via-synapse-dark to-neural-700 bg-clip-text text-transparent italic">
          Musings
        </span>
      </h1>
      <p class="text-xl text-neural-600 font-body leading-relaxed">
        Writings, music, stories, and the threads that connect science to the rest of life.
      </p>
    </div>

    <div class="space-y-12">
      {musingsPosts.map((post) => (
        <article class="group">
          <a href={`/musings/${post.slug}`} class="block">
            <div class="bg-white/60 backdrop-blur-sm rounded-lg p-8 border border-neural-200 hover:border-synapse-dark transition-all duration-300 hover:shadow-lg">
              <div class="flex items-center gap-4 mb-3">
                <time class="text-sm font-mono text-neural-500">
                  {post.data.pubDate.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                  })}
                </time>
                {post.data.category && (
                  <span class="text-xs font-mono px-3 py-1 bg-synapse-light/20 text-synapse-dark rounded-full">
                    {post.data.category}
                  </span>
                )}
              </div>
              
              <h2 class="text-2xl md:text-3xl font-display font-semibold mb-3 text-neural-800 group-hover:text-synapse-dark transition-colors">
                {post.data.title}
              </h2>
              
              {post.data.description && (
                <p class="text-neural-600 font-body mb-4 leading-relaxed italic">
                  {post.data.description}
                </p>
              )}
              
              {post.data.tags && (
                <div class="flex flex-wrap gap-2 mt-4">
                  {post.data.tags.map((tag) => (
                    <span class="text-xs font-mono px-3 py-1 bg-neural-100 text-neural-600 rounded-full">
                      {tag}
                    </span>
                  ))}
                </div>
              )}
              
              <div class="mt-4 text-synapse-dark font-mono text-sm opacity-0 group-hover:opacity-100 transition-opacity">
                Read more â†’
              </div>
            </div>
          </a>
        </article>
      ))}
    </div>
  </div>
</BaseLayout>
